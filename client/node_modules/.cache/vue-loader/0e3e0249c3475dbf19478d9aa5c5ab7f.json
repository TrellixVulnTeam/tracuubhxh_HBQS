{"remainingRequest":"E:\\CODE_APP\\TRACUUNO\\client\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\CODE_APP\\TRACUUNO\\client\\src\\pages\\authentication\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\CODE_APP\\TRACUUNO\\client\\src\\pages\\authentication\\login.vue","mtime":1658484317761},{"path":"E:\\CODE_APP\\TRACUUNO\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\CODE_APP\\TRACUUNO\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\CODE_APP\\TRACUUNO\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\CODE_APP\\TRACUUNO\\client\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czoge30sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHR5cGU6ICJwYXNzd29yZCIsCiAgICAgIHN1Ym1pdHRlZDogZmFsc2UsCiAgICAgIGZvcm06IHsKICAgICAgICBNQV9ET05WSTogbnVsbCwKICAgICAgICBNU19USFVFOiBudWxsLAogICAgICAgIFNEVF9OR1VPSV9ERDogbnVsbCwKICAgICAgICBESUVOX1RIT0FJX0RPTlZJOiBudWxsLAogICAgICB9LAogICAgICBtZXNzYWdlOiAiIiwKICAgICAgY2hlY2tfU0RUX0xPR0lOOiBmYWxzZSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgbG9nZ2VkSW4oKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoLnN0YXR1cy5sb2dnZWRJbjsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMubG9nZ2VkSW4pIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9kYXNoYm9hcmQvZGVmYXVsdCIpOwogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVN1Ym1pdCgpIHsKICAgICAgdGhpcy5zdWJtaXR0ZWQgPSB0cnVlOwogICAgfSwKICAgIGFzeW5jIGxvZ2luKCkgewogICAgICAvL2NvbnNvbGUubG9nKHRoaXMuY2hlY2tfU0RUX0xPR0lOKQogICAgICBpZiAoCiAgICAgICAgIXRoaXMuZm9ybS5NQV9ET05WSSAmJgogICAgICAgICF0aGlzLmZvcm0uTVNfVEhVRSAmJgogICAgICAgICF0aGlzLmZvcm0uU0RUX05HVU9JX0RECiAgICAgICkgewogICAgICAgIGNvbnN0IFRvYXN0ID0gdGhpcy4kc3dhbC5taXhpbih7CiAgICAgICAgICB0b2FzdDogdHJ1ZSwKICAgICAgICAgIHBvc2l0aW9uOiAidG9wLWVuZCIsCiAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICB0aW1lcjogMzAwMCwKICAgICAgICAgIHRpbWVyUHJvZ3Jlc3NCYXI6IHRydWUsCiAgICAgICAgICBkaWRPcGVuOiAodG9hc3QpID0+IHsKICAgICAgICAgICAgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VlbnRlciIsIHRoaXMuJHN3YWwuc3RvcFRpbWVyKTsKICAgICAgICAgICAgdG9hc3QuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsIHRoaXMuJHN3YWwucmVzdW1lVGltZXIpOwogICAgICAgICAgfSwKICAgICAgICB9KTsKCiAgICAgICAgVG9hc3QuZmlyZSh7CiAgICAgICAgICBpY29uOiAid2FybmluZyIsCiAgICAgICAgICB0aXRsZTogIkLhuqFuIGtow7RuZyB0aOG7gyDEkcSDbmcgbmjhuq1wIG7hur91IGtow7RuZyBjw7MgdGjDtG5nIHRpbiBjaMOtbmggeMOhYy4iLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmNoZWNrX1NEVF9MT0dJTiA9PSB0cnVlKSB7CiAgICAgICAgICAvL2FsZXJ0KCdvaycpCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiYXV0aC9sb2dpbjIiLCB0aGlzLmZvcm0pLnRoZW4oCiAgICAgICAgICAgICgpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2Rhc2hib2FyZC9kZWZhdWx0IikuY2F0Y2goKCkgPT4ge30pOwogICAgICAgICAgICB9LAogICAgICAgICAgICAoZXJyb3IpID0+IHsKICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPQogICAgICAgICAgICAgICAgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLmRhdGEpIHx8CiAgICAgICAgICAgICAgICBlcnJvci5tZXNzYWdlIHx8CiAgICAgICAgICAgICAgICBlcnJvci50b1N0cmluZygpOwogICAgICAgICAgICB9CiAgICAgICAgICApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiYXV0aC9sb2dpbiIsIHRoaXMuZm9ybSkudGhlbigKICAgICAgICAgICAgKCkgPT4gewogICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvZGFzaGJvYXJkL2RlZmF1bHQiKS5jYXRjaCgoKSA9PiB7fSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIChlcnJvcikgPT4gewogICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9CiAgICAgICAgICAgICAgICAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSkgfHwKICAgICAgICAgICAgICAgIGVycm9yLm1lc3NhZ2UgfHwKICAgICAgICAgICAgICAgIGVycm9yLnRvU3RyaW5nKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CgogICAgICAvKiBsZXQgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgIGBodHRwOi8vbG9jYWxob3N0Ojk5OTkvYXBpL3VzZXJzL21zdC9sb2dpbmAsCiAgICAgICAgdGhpcy5mb3JtCiAgICAgICk7ICovCiAgICAgIC8vY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS51c2VyKTsKICAgICAgLy9sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlci10b2tlbiIsIHJlc3BvbnNlLmRhdGEudG9rZW4pOwogICAgICAvL3RoaXMuJHN0b3JlLmRpc3BhdGNoKCJ1c2VyIiwgcmVzcG9uc2UuZGF0YS51c2VyKTsKCiAgICAgIC8qIHRoaXMuJHJvdXRlci5wdXNoKCIvZGFzaGJvYXJkL2RlZmF1bHQiKTsgKi8KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;AAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/pages/authentication","sourcesContent":["<template>\n  <form\n    class=\"form-horizontal auth-form\"\n    @submit.prevent=\"handleSubmit\"\n    method=\"post\"\n  >\n    <div class=\"form-group\">\n      <input\n        v-model=\"form.MA_DONVI\"\n        type=\"text\"\n        class=\"form-control\"\n        id=\"exampleInputEmail1\"\n        placeholder=\"Mã đơn vị\"\n      />\n    </div>\n    <div class=\"form-group\">\n      <input\n        type=\"text\"\n        v-model=\"form.MS_THUE\"\n        class=\"form-control\"\n        placeholder=\"Mã số thuế\"\n      />\n    </div>\n    <template v-if=\"check_SDT_LOGIN == false\">\n      <div class=\"form-group\">\n        <input\n          type=\"text\"\n          v-model=\"form.SDT_NGUOI_DD\"\n          class=\"form-control\"\n          placeholder=\"Số điện thoại người đại diện\"\n        />\n      </div>\n    </template>\n    <template v-else>\n      <div class=\"form-group\">\n        <input\n          type=\"text\"\n          v-model=\"form.DIEN_THOAI_DONVI\"\n          class=\"form-control\"\n          placeholder=\"Số điện thoại đơn vị\"\n        />\n      </div>\n    </template>\n\n    <div class=\"form-terms\">\n      <div class=\"custom-control custom-checkbox mr-sm-2\">\n        <input\n          v-model=\"check_SDT_LOGIN\"\n          type=\"checkbox\"\n          value=\"1\"\n          class=\"custom-control-input\"\n          id=\"customControlAutosizing\"\n        />\n        <label class=\"custom-control-label\" for=\"customControlAutosizing\"\n          >Dùng điện thoại đơn vị đăng nhập</label\n        >\n      </div>\n    </div>\n    <div class=\"form-button\">\n      <button class=\"btn btn-primary\" type=\"submit\" @click=\"login\">\n        Đăng nhập\n      </button>\n    </div>\n  </form>\n</template>\n\n<script>\n\nexport default {\n  components: {},\n  data() {\n    return {\n      type: \"password\",\n      submitted: false,\n      form: {\n        MA_DONVI: null,\n        MS_THUE: null,\n        SDT_NGUOI_DD: null,\n        DIEN_THOAI_DONVI: null,\n      },\n      message: \"\",\n      check_SDT_LOGIN: false,\n    };\n  },\n  computed: {\n    loggedIn() {\n      return this.$store.state.auth.status.loggedIn;\n    },\n  },\n  created() {\n    if (this.loggedIn) {\n      this.$router.push(\"/dashboard/default\");\n    }\n  },\n\n  methods: {\n    handleSubmit() {\n      this.submitted = true;\n    },\n    async login() {\n      //console.log(this.check_SDT_LOGIN)\n      if (\n        !this.form.MA_DONVI &&\n        !this.form.MS_THUE &&\n        !this.form.SDT_NGUOI_DD\n      ) {\n        const Toast = this.$swal.mixin({\n          toast: true,\n          position: \"top-end\",\n          showConfirmButton: false,\n          timer: 3000,\n          timerProgressBar: true,\n          didOpen: (toast) => {\n            toast.addEventListener(\"mouseenter\", this.$swal.stopTimer);\n            toast.addEventListener(\"mouseleave\", this.$swal.resumeTimer);\n          },\n        });\n\n        Toast.fire({\n          icon: \"warning\",\n          title: \"Bạn không thể đăng nhập nếu không có thông tin chính xác.\",\n        });\n      } else {\n        if (this.check_SDT_LOGIN == true) {\n          //alert('ok')\n          this.$store.dispatch(\"auth/login2\", this.form).then(\n            () => {\n              this.$router.push(\"/dashboard/default\").catch(() => {});\n            },\n            (error) => {\n              this.message =\n                (error.response && error.response.data) ||\n                error.message ||\n                error.toString();\n            }\n          );\n        } else {\n          this.$store.dispatch(\"auth/login\", this.form).then(\n            () => {\n              this.$router.push(\"/dashboard/default\").catch(() => {});\n            },\n            (error) => {\n              this.message =\n                (error.response && error.response.data) ||\n                error.message ||\n                error.toString();\n            }\n          );\n        }\n      }\n\n      /* let response = await axios.post(\n        `http://localhost:9999/api/users/mst/login`,\n        this.form\n      ); */\n      //console.log(response.data.user);\n      //localStorage.setItem(\"user-token\", response.data.token);\n      //this.$store.dispatch(\"user\", response.data.user);\n\n      /* this.$router.push(\"/dashboard/default\"); */\n    },\n  },\n};\n</script>"]}]}